# ğŸ¯ ç¬¬äºŒé˜¶æ®µï¼šç»å†ç±»é—®é¢˜æ¨¡å—

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

ç¬¬äºŒé˜¶æ®µç»å†ç±»é—®é¢˜æ¨¡å—æ˜¯AIé¢è¯•ç³»ç»Ÿçš„æ ¸å¿ƒç¯èŠ‚ï¼Œä¸“æ³¨äºæ·±åº¦æŒ–æ˜å€™é€‰äººçš„é¡¹ç›®ç»å†å’ŒæŠ€æœ¯èƒ½åŠ›ã€‚æœ¬æ¨¡å—å®Œå…¨åŸºäº**case.docx**çš„ä¸“ä¸šæ·±æŒ–æé—®æ–¹å¼ï¼Œå®ç°äº†ä»åŸºç¡€ç»å†ä»‹ç»åˆ°æ·±åº¦æŠ€æœ¯è¿½é—®çš„å®Œæ•´æµç¨‹ã€‚

## ğŸª æ ¸å¿ƒç‰¹æ€§

### 1. å›ºå®šé¦–é—®æœºåˆ¶
- **ç¬¬ä¸€ä¸ªé—®é¢˜å›ºå®š**ï¼šè¦æ±‚å€™é€‰äººè¯¦ç»†ä»‹ç»ç®€å†ä¸Šçš„ä¸€ä¸ªç»å†
- **ä¸ªæ€§åŒ–å±•ç¤º**ï¼šæ ¹æ®ç®€å†å†…å®¹åŠ¨æ€ç”Ÿæˆç»å†åˆ—è¡¨
- **å…¨é¢è¦†ç›–**ï¼šå¼•å¯¼å€™é€‰äººä»èƒŒæ™¯ã€èŒè´£ã€æŠ€æœ¯ã€æŒ‘æˆ˜ã€æˆæœç­‰ç»´åº¦æè¿°

### 2. åŸºäºcase.docxçš„æ·±æŒ–æé—®
- **å®Œæ•´é›†æˆ**ï¼šå°†case.docxçš„41æ®µæ·±æŒ–ç¤ºä¾‹ä½œä¸ºAIç³»ç»Ÿæç¤ºè¯
- **ä¸“ä¸šé£æ ¼**ï¼šä»¿ç…§çœŸå®æŠ€æœ¯é¢è¯•å®˜çš„æ·±æŒ–æ–¹å¼
- **äº”å¤§åŸåˆ™**ï¼šæŠ€æœ¯æ·±åº¦ã€æ•°æ®ç»†èŠ‚ã€æ¶æ„å†³ç­–ã€å®é™…æ•ˆæœã€å›¢é˜Ÿåä½œ

### 3. æ™ºèƒ½æŠ€æœ¯åˆ†æ
- **å…³é”®è¯æå–**ï¼šè‡ªåŠ¨è¯†åˆ«ç»å†ä¸­çš„æŠ€æœ¯å…³é”®è¯
- **æ·±åº¦è¿½é—®**ï¼šåŸºäºæŠ€æœ¯æ ˆç”Ÿæˆé’ˆå¯¹æ€§é—®é¢˜
- **é¿é‡å¤æœºåˆ¶**ï¼šç¡®ä¿æ¯è½®è¿½é—®éƒ½æœ‰æ–°çš„æ¢ç´¢è§’åº¦

### 4. å¤šç»´åº¦è¯„ä¼°
- **æŠ€æœ¯å‡†ç¡®æ€§**ï¼šè¯„ä¼°æŠ€æœ¯æè¿°çš„ä¸“ä¸šæ€§å’Œå‡†ç¡®æ€§
- **é¡¹ç›®å¤æ‚åº¦**ï¼šåˆ†æé¡¹ç›®çš„æŠ€æœ¯æŒ‘æˆ˜å’Œè§„æ¨¡
- **ä¸ªäººè´¡çŒ®**ï¼šäº†è§£å€™é€‰äººçš„å…·ä½“è§’è‰²å’Œè´¡çŒ®
- **çœŸå®ç»éªŒ**ï¼šåˆ¤æ–­ç»å†çš„çœŸå®æ€§å’Œæ·±åº¦

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ¨¡å—ç»“æ„
```
stage2_experience/
â”œâ”€â”€ __init__.py                  # æ¨¡å—åˆå§‹åŒ–å’Œå¯¼å‡º
â”œâ”€â”€ experience_engine.py         # ä¸»å¼•æ“ï¼Œæ§åˆ¶æ•´ä¸ªæµç¨‹
â”œâ”€â”€ deep_dive_generator.py       # æ·±æŒ–é—®é¢˜ç”Ÿæˆå™¨
â”œâ”€â”€ experience_evaluator.py      # ç»å†å›ç­”è¯„ä¼°å™¨
â”œâ”€â”€ case_prompts.py              # case.docxæ·±æŒ–æ¨¡æ¿
â””â”€â”€ README.md                    # æœ¬æ–‡æ¡£
```

### ç±»å…³ç³»å›¾
```
ExperienceQuestionEngine (ä¸»å¼•æ“)
    â”œâ”€â”€ DeepDiveQuestionGenerator (æ·±æŒ–ç”Ÿæˆ)
    â”‚   â””â”€â”€ CaseBasedPrompts (case.docxæ¨¡æ¿)
    â””â”€â”€ ExperienceEvaluator (å›ç­”è¯„ä¼°)
```

## ğŸ› ï¸ è¯¦ç»†å®ç°

### 1. ExperienceQuestionEngine (ä¸»å¼•æ“)

**èŒè´£**ï¼šæ§åˆ¶ç¬¬äºŒé˜¶æ®µçš„æ•´ä¸ªé¢è¯•æµç¨‹

**æ ¸å¿ƒæ–¹æ³•**ï¼š
```python
# å¼€å§‹ç¬¬äºŒé˜¶æ®µ
start_stage(resume_data: Dict, jd_data: Dict) -> Dict

# ç”Ÿæˆå›ºå®šçš„ç¬¬ä¸€ä¸ªé—®é¢˜
generate_initial_experience_question() -> Dict

# ç”Ÿæˆåç»­æ·±æŒ–è¿½é—®
generate_follow_up_question(user_experience_description: str) -> Dict

# å¤„ç†ç”¨æˆ·å›ç­”
process_answer(user_response: str, question_data: Dict) -> Dict

# è·å–é˜¶æ®µæ€»ç»“
get_stage_summary() -> Dict
```

**çŠ¶æ€ç®¡ç†**ï¼š
- `current_question_index`: å½“å‰é—®é¢˜ç´¢å¼•
- `max_questions`: æœ€å¤§é—®é¢˜æ•°ï¼ˆé»˜è®¤3é¢˜ï¼‰
- `current_experience`: å½“å‰è®¨è®ºçš„ç»å†
- `technical_keywords`: æŠ€æœ¯å…³é”®è¯åˆ—è¡¨
- `asked_questions`: å·²æé—®é—®é¢˜åˆ—è¡¨

### 2. CaseBasedPrompts (case.docxæ¨¡æ¿)

**èŒè´£**ï¼šæä¾›åŸºäºcase.docxçš„æ·±æŒ–æé—®æ¨¡æ¿å’Œç³»ç»Ÿæç¤ºè¯

**æ ¸å¿ƒå†…å®¹**ï¼š
```python
@staticmethod
def get_system_prompt() -> str:
    """è·å–å®Œæ•´çš„ç³»ç»Ÿæç¤ºè¯ï¼ŒåŒ…å«case.docxçš„æ‰€æœ‰æ·±æŒ–ç¤ºä¾‹"""
    
@staticmethod 
def get_fallback_questions() -> dict:
    """è·å–å¤‡ç”¨æ·±æŒ–é—®é¢˜"""
```

**æ¡ˆä¾‹ç¤ºä¾‹**ï¼š
- **ç»¿è‰²é‡‘èé—®ç­”ç³»ç»Ÿ**ï¼šå¾®è°ƒã€RAGã€æ¨¡å‹é€‰æ‹©ç­‰æ·±æŒ–
- **å¤å…¸æ–‡å­¦AIé¡¹ç›®**ï¼šéŸµå¾‹çŠ¶æ€æœºã€Token Maskingç­‰ç»†èŠ‚
- **ä¼ä¸šçŸ¥è¯†åº“ç³»ç»Ÿ**ï¼šå‘é‡æ£€ç´¢ã€å¯¹æ¯”å­¦ä¹ ç­‰æ¶æ„
- **Speculative Decodingä¼˜åŒ–**ï¼šè‰ç¨¿å¤´è’¸é¦ã€åŠ¨æ€é€‰æ‹©ç­‰ç®—æ³•
- **DiffuTexté¡¹ç›®**ï¼šæ‰©æ•£æ¨¡å‹ã€å˜åˆ†æ¨æ–­ç­‰å‰æ²¿æŠ€æœ¯
- **è·¨å¹³å°ç«ä»·ç³»ç»Ÿ**ï¼šè”é‚¦å­¦ä¹ ã€å·®åˆ†éšç§ç­‰å¤æ‚åœºæ™¯

### 3. DeepDiveQuestionGenerator (æ·±æŒ–ç”Ÿæˆå™¨)

**èŒè´£**ï¼šåŸºäºcase.docxé£æ ¼ç”Ÿæˆä¸“ä¸šçš„æ·±æŒ–è¿½é—®

**ç”Ÿæˆç­–ç•¥**ï¼š
1. **AIä¼˜å…ˆç­–ç•¥**ï¼šä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ç»“åˆcase.docxæ¨¡æ¿ç”Ÿæˆ
2. **æ™ºèƒ½åˆ†ç±»**ï¼šæ ¹æ®æŠ€æœ¯å…³é”®è¯é€‰æ‹©åˆé€‚çš„è¿½é—®è§’åº¦
3. **é¿é‡å¤æœºåˆ¶**ï¼šåˆ†æå·²æé—®å†å²ï¼Œé¿å…ç›¸ä¼¼é—®é¢˜

**æ·±æŒ–ç”Ÿæˆæµç¨‹**ï¼š
```python
def generate_deep_dive_question(user_experience, question_history, technical_keywords):
    # 1. æ„å»ºåŒ…å«case.docxç¤ºä¾‹çš„æç¤ºè¯
    prompt = _build_deep_dive_prompt(user_experience, question_history, technical_keywords)
    
    # 2. è°ƒç”¨AIç”Ÿæˆæ·±æŒ–é—®é¢˜
    ai_question = _generate_ai_deep_dive_question(prompt)
    
    # 3. æ ¼å¼æ¸…ç†å’Œè´¨é‡æ£€æŸ¥
    return _clean_question_format(ai_question)
```

**é—®é¢˜åˆ†ç±»**ï¼š
- `technical_details`: æŠ€æœ¯å®ç°ç»†èŠ‚
- `performance_metrics`: æ€§èƒ½æŒ‡æ ‡å’Œä¼˜åŒ–
- `architecture_design`: æ¶æ„è®¾è®¡å†³ç­–
- `business_impact`: ä¸šåŠ¡ä»·å€¼å’Œæ•ˆæœ
- `team_collaboration`: å›¢é˜Ÿåä½œå’Œç®¡ç†

### 4. ExperienceEvaluator (ç»å†è¯„ä¼°å™¨)

**èŒè´£**ï¼šå¤šç»´åº¦è¯„ä¼°ç»å†ç±»é—®é¢˜çš„å›ç­”è´¨é‡

**è¯„ä¼°ç»´åº¦**ï¼š

#### ç»å†ä»‹ç»è¯·æ±‚ (`initial_experience_request`)
- **æŠ€æœ¯æ·±åº¦** (30%)ï¼šæŠ€æœ¯æè¿°çš„æ·±åº¦å’Œä¸“ä¸šæ€§
- **é¡¹ç›®å¤æ‚åº¦** (25%)ï¼šé¡¹ç›®çš„æŠ€æœ¯å¤æ‚åº¦å’ŒæŒ‘æˆ˜æ€§
- **ä¸ªäººè´¡çŒ®** (20%)ï¼šä¸ªäººåœ¨é¡¹ç›®ä¸­çš„å…·ä½“è´¡çŒ®å’Œè§’è‰²
- **é—®é¢˜è§£å†³èƒ½åŠ›** (15%)ï¼šé‡åˆ°é—®é¢˜æ—¶çš„åˆ†æå’Œè§£å†³èƒ½åŠ›
- **è¡¨è¾¾æ¸…æ™°åº¦** (10%)ï¼šè¡¨è¾¾æ˜¯å¦æ¸…æ™°ã€é€»è¾‘æ€§å¼º

#### æ·±æŒ–è¿½é—® (`deep_dive`)
- **æŠ€æœ¯å‡†ç¡®æ€§** (40%)ï¼šæŠ€æœ¯å›ç­”çš„å‡†ç¡®æ€§å’Œä¸“ä¸šæ€§
- **ç»†èŠ‚ä¸°å¯Œåº¦** (30%)ï¼šå›ç­”ä¸­æŠ€æœ¯ç»†èŠ‚çš„ä¸°å¯Œç¨‹åº¦
- **çœŸå®ç»éªŒä½“ç°** (20%)ï¼šæ˜¯å¦ä½“ç°å‡ºçœŸå®çš„é¡¹ç›®ç»éªŒ
- **é€»è¾‘æ€ç»´** (10%)ï¼šå›ç­”çš„é€»è¾‘æ€§å’Œæ¡ç†æ€§

**è¯„ä¼°æµç¨‹**ï¼š
```python
def evaluate_response(user_response, question_data, context):
    # 1. AIæ™ºèƒ½è¯„ä¼°
    ai_evaluation = _ai_evaluate(user_response, question_data, context)
    
    # 2. æŠ€æœ¯å…³é”®è¯åˆ†æ
    tech_analysis = _analyze_technical_content(user_response, technical_keywords)
    
    # 3. é¡¹ç›®ç»éªŒåˆ†æ
    experience_analysis = _analyze_project_experience(user_response, question_type)
    
    # 4. ç»¼åˆè¯„åˆ†è®¡ç®—
    final_score = _calculate_final_score(ai_evaluation, tech_analysis, experience_analysis)
    
    return evaluation_result
```

## ğŸ“Š æ•°æ®æµç¨‹

### è¾“å…¥æ•°æ®æ ¼å¼

**ç®€å†æ•°æ®** (`resume_data`)ï¼š
```python
{
    'name': 'å€™é€‰äººå§“å',
    'projects': [
        'æ™ºèƒ½æ¨èç³»ç»Ÿ - åŸºäºååŒè¿‡æ»¤å’Œæ·±åº¦å­¦ä¹ çš„ä¸ªæ€§åŒ–æ¨èå¹³å°',
        'åˆ†å¸ƒå¼æ•°æ®å¤„ç†å¹³å° - æ”¯æŒå¤§è§„æ¨¡æ•°æ®å®æ—¶å¤„ç†çš„å¾®æœåŠ¡æ¶æ„'
    ],
    'experience': [
        'é˜¿é‡Œå·´å·´ - é«˜çº§åç«¯å¼€å‘å·¥ç¨‹å¸ˆ (2021-2023)',
        'å­—èŠ‚è·³åŠ¨ - åç«¯å¼€å‘å·¥ç¨‹å¸ˆ (2019-2021)'
    ],
    'skills': ['Python', 'Java', 'Spring Boot', 'Redis', 'MySQL']
}
```

### è¾“å‡ºæ•°æ®æ ¼å¼

**ç¬¬ä¸€ä¸ªé—®é¢˜**ï¼ˆç»å†ä»‹ç»è¯·æ±‚ï¼‰ï¼š
```python
{
    'question': 'æˆ‘çœ‹åˆ°æ‚¨çš„ç®€å†ä¸­æœ‰ä»¥ä¸‹å‡ é¡¹ç»å†ï¼š\n\n- é¡¹ç›®ç»å†ï¼šæ™ºèƒ½æ¨èç³»ç»Ÿ...\n\nè¯·æ‚¨é€‰æ‹©å…¶ä¸­ä¸€é¡¹æ‚¨è§‰å¾—æœ€æœ‰ä»£è¡¨æ€§çš„ç»å†ï¼Œè¯¦ç»†ä»‹ç»...',
    'question_type': 'initial_experience_request',
    'source': 'experience_engine',
    'stage': 'ç¬¬äºŒé˜¶æ®µï¼šç»å†ç±»é—®é¢˜',
    'question_number': 1,
    'total_questions': 3,
    'category': 'ç»å†ä»‹ç»'
}
```

**æ·±æŒ–è¿½é—®**ï¼š
```python
{
    'question': 'å…³äºLambdaæ¶æ„ä¸­çš„æµå¤„ç†å±‚ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©Flinkè€ŒéStormæˆ–Kafka Streamsï¼ŸFlinkçš„çŠ¶æ€ç®¡ç†åœ¨ä½ ä»¬çš„åœºæ™¯ä¸‹å¦‚ä½•ä¼˜åŒ–ï¼Ÿ',
    'question_type': 'deep_dive',
    'source': 'ai_generated_deep_dive',
    'stage': 'ç¬¬äºŒé˜¶æ®µï¼šç»å†ç±»é—®é¢˜',
    'question_number': 2,
    'total_questions': 3,
    'tech_keywords': ['Lambdaæ¶æ„', 'Flink', 'Storm', 'Kafka'],
    'category': 'æ·±æŒ–è¿½é—®'
}
```

**è¯„ä¼°ç»“æœ**ï¼š
```python
{
    'score': 0.82,
    'ai_evaluation': {
        'scores': {
            'æŠ€æœ¯æ·±åº¦': 0.85,
            'é¡¹ç›®å¤æ‚åº¦': 0.80,
            'ä¸ªäººè´¡çŒ®': 0.85,
            'é—®é¢˜è§£å†³èƒ½åŠ›': 0.78,
            'è¡¨è¾¾æ¸…æ™°åº¦': 0.80
        },
        'technical_highlights': 'å¯¹Lambdaæ¶æ„æœ‰æ·±å…¥ç†è§£ï¼ŒFlinkçŠ¶æ€ç®¡ç†ä¼˜åŒ–æœ‰å®é™…ç»éªŒ',
        'improvement_suggestions': 'å¯ä»¥è¡¥å……æ›´å¤šæ€§èƒ½ä¼˜åŒ–çš„å…·ä½“æ•°æ®',
        'overall_comment': 'å›ç­”å±•ç°äº†æ‰å®çš„å¤§æ•°æ®æ¶æ„ç»éªŒå’Œæ·±åº¦æŠ€æœ¯ç†è§£'
    },
    'technical_analysis': {
        'keyword_coverage': 0.75,
        'mentioned_keywords': ['Lambdaæ¶æ„', 'Flink', 'Spark', 'Redis'],
        'detail_score': 0.80,
        'number_score': 0.60,
        'technical_numbers': ['3ms', '92%', '50äº¿æ¬¡']
    },
    'experience_analysis': {
        'experience_score': 0.85,
        'scale_score': 0.90,
        'length_score': 0.85,
        'response_length': 456
    }
}
```

**é˜¶æ®µæ€»ç»“**ï¼š
```python
{
    'stage_name': 'ç¬¬äºŒé˜¶æ®µï¼šç»å†ç±»é—®é¢˜',
    'questions_asked': 3,
    'total_questions': 3,
    'average_score': 0.78,
    'question_responses': [é—®ç­”è®°å½•],
    'detailed_scores': [0.82, 0.76, 0.77],
    'current_experience_summary': 'æˆ‘æƒ³è¯¦ç»†ä»‹ç»ä¸€ä¸‹æˆ‘åœ¨é˜¿é‡Œå·´å·´è´Ÿè´£çš„æ™ºèƒ½æ¨èç³»ç»Ÿé¡¹ç›®...',
    'technical_keywords_discussed': ['æ¨èç³»ç»Ÿ', 'Lambdaæ¶æ„', 'Flink', 'Transformer'],
    'stage_completed': True,
    'next_stage': 'ç¬¬ä¸‰é˜¶æ®µï¼šæŠ€æœ¯ç±»é—®é¢˜'
}
```

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨æµç¨‹

```python
from ai_interview.stages.stage2_experience import ExperienceQuestionEngine

# 1. åˆå§‹åŒ–å¼•æ“
engine = ExperienceQuestionEngine()

# 2. å‡†å¤‡æ•°æ®
resume_data = {
    'name': 'ææ˜',
    'projects': [
        'æ™ºèƒ½æ¨èç³»ç»Ÿ - åŸºäºååŒè¿‡æ»¤å’Œæ·±åº¦å­¦ä¹ çš„ä¸ªæ€§åŒ–æ¨èå¹³å°',
        'åˆ†å¸ƒå¼æ•°æ®å¤„ç†å¹³å° - æ”¯æŒå¤§è§„æ¨¡æ•°æ®å®æ—¶å¤„ç†çš„å¾®æœåŠ¡æ¶æ„'
    ],
    'experience': ['é˜¿é‡Œå·´å·´-é«˜çº§åç«¯å¼€å‘å·¥ç¨‹å¸ˆ'],
    'skills': ['Python', 'Java', 'Flink', 'Redis']
}

jd_data = {
    'position': 'èµ„æ·±åç«¯å¼€å‘å·¥ç¨‹å¸ˆ',
    'keywords': ['Java', 'Spring Cloud', 'å¾®æœåŠ¡', 'å¤§æ•°æ®']
}

# 3. å¼€å§‹ç¬¬äºŒé˜¶æ®µï¼ˆç¬¬ä¸€ä¸ªé—®é¢˜ï¼šç»å†ä»‹ç»è¯·æ±‚ï¼‰
first_question = engine.start_stage(resume_data, jd_data)
print(f"ç¬¬ä¸€ä¸ªé—®é¢˜: {first_question['question']}")

# 4. å¤„ç†ç¬¬ä¸€ä¸ªå›ç­”ï¼ˆç”¨æˆ·è¯¦ç»†ä»‹ç»ç»å†ï¼‰
user_experience = """
æˆ‘æƒ³è¯¦ç»†ä»‹ç»ä¸€ä¸‹æˆ‘åœ¨é˜¿é‡Œå·´å·´è´Ÿè´£çš„æ™ºèƒ½æ¨èç³»ç»Ÿé¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯ä¸ºäº†æå‡æ·˜å®APPçš„å•†å“æ¨èç²¾å‡†åº¦ï¼ŒæœåŠ¡æ•°äº¿ç”¨æˆ·çš„ä¸ªæ€§åŒ–æ¨èéœ€æ±‚ã€‚

é¡¹ç›®èƒŒæ™¯æ˜¯å½“æ—¶çš„æ¨èç³»ç»Ÿä¸»è¦åŸºäºä¼ ç»Ÿçš„ååŒè¿‡æ»¤ç®—æ³•ï¼Œå‡†ç¡®ç‡çº¦65%ï¼Œè€Œä¸”æ— æ³•å¾ˆå¥½åœ°å¤„ç†å†·å¯åŠ¨é—®é¢˜å’Œå®æ—¶æ€§è¦æ±‚ã€‚æˆ‘ä½œä¸ºåç«¯æ¶æ„å¸ˆï¼Œè´Ÿè´£æ•´ä¸ªæ¨èå¼•æ“çš„è®¾è®¡å’Œå®ç°ã€‚

æŠ€æœ¯æ¶æ„æ–¹é¢ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†Lambdaæ¶æ„ï¼ŒåŒ…æ‹¬æ‰¹å¤„ç†å±‚ã€æµå¤„ç†å±‚å’ŒæœåŠ¡å±‚ã€‚æ‰¹å¤„ç†å±‚ä½¿ç”¨Sparkå¤„ç†å†å²æ•°æ®ï¼Œè®­ç»ƒæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆä¸»è¦æ˜¯åŸºäºTransformerçš„åºåˆ—æ¨èæ¨¡å‹ï¼‰ï¼›æµå¤„ç†å±‚ä½¿ç”¨Flinkå¤„ç†å®æ—¶ç”¨æˆ·è¡Œä¸ºï¼Œæ›´æ–°ç”¨æˆ·ç”»åƒå’Œå®æ—¶ç‰¹å¾ï¼›æœåŠ¡å±‚ä½¿ç”¨Spring Cloudå¾®æœåŠ¡æ¶æ„ï¼Œæä¾›é«˜å¹¶å‘çš„æ¨èAPIã€‚
"""

evaluation = engine.process_answer(user_experience, first_question)
print(f"ç¬¬ä¸€é¢˜è¯„åˆ†: {evaluation['score']}")

# 5. ç”Ÿæˆæ·±æŒ–è¿½é—®
if engine.should_continue():
    deep_dive_question = engine.generate_follow_up_question(user_experience)
    print(f"æ·±æŒ–é—®é¢˜: {deep_dive_question['question']}")

# 6. ç»§ç»­å¤„ç†åç»­å›ç­”...

# 7. è·å–é˜¶æ®µæ€»ç»“
summary = engine.get_stage_summary()
print(f"é˜¶æ®µå®Œæˆï¼Œå¹³å‡åˆ†: {summary['average_score']}")
print(f"æŠ€æœ¯å…³é”®è¯: {summary['technical_keywords_discussed']}")
```

### é«˜çº§ä½¿ç”¨ç¤ºä¾‹

```python
# è‡ªå®šä¹‰é…ç½®
engine = ExperienceQuestionEngine()
engine.max_questions = 4  # å¢åŠ åˆ°4é¢˜

# è·å–å®æ—¶è¿›åº¦
progress = engine.get_progress_info()
print(f"è¿›åº¦: {progress['current_question']}/{progress['total_questions']}")
print(f"å·²æå–å…³é”®è¯: {progress['keywords_extracted']}ä¸ª")

# æŸ¥çœ‹æŠ€æœ¯å…³é”®è¯
if progress['experience_provided']:
    print(f"æŠ€æœ¯å…³é”®è¯: {engine.technical_keywords}")

# é‡ç½®å¼•æ“çŠ¶æ€
engine.reset()
```

## ğŸ¯ æ·±æŒ–æé—®äº”å¤§åŸåˆ™

### 1. **æŠ€æœ¯æ·±åº¦**
- ä¸æ»¡è¶³äºè¡¨é¢æè¿°ï¼Œæ·±å…¥æŠ€æœ¯å®ç°ç»†èŠ‚
- ä¸ºä»€ä¹ˆé€‰æ‹©æŸä¸ªæŠ€æœ¯æ–¹æ¡ˆï¼Ÿ
- å…·ä½“çš„å‚æ•°è®¾ç½®å’Œè°ƒä¼˜è¿‡ç¨‹
- é‡åˆ°çš„æŠ€æœ¯æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ

### 2. **æ•°æ®ç»†èŠ‚**
- å…³æ³¨å…·ä½“çš„æ•°æ®å’ŒæŒ‡æ ‡
- æ•°æ®é‡ã€å‡†ç¡®ç‡ã€å»¶è¿Ÿç­‰å…·ä½“æ•°å­—
- å®éªŒå¯¹æ¯”å’ŒA/Bæµ‹è¯•ç»“æœ
- æ€§èƒ½ä¼˜åŒ–çš„å…·ä½“æå‡å¹…åº¦

### 3. **æ¶æ„å†³ç­–**
- äº†è§£æ¶æ„é€‰æ‹©çš„æ€è€ƒè¿‡ç¨‹
- æŠ€æœ¯é€‰å‹çš„æƒè¡¡è€ƒè™‘
- æ›¿ä»£æ–¹æ¡ˆçš„å¯¹æ¯”åˆ†æ
- å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§è€ƒè™‘

### 4. **å®é™…æ•ˆæœ**
- å…³æ³¨é¡¹ç›®çš„å®é™…åº”ç”¨å’Œä»·å€¼
- ä¸šåŠ¡ä»·å€¼å’Œç”¨æˆ·åé¦ˆ
- éƒ¨ç½²è§„æ¨¡å’Œä½¿ç”¨æƒ…å†µ
- åç»­ä¼˜åŒ–å’Œè¿­ä»£è®¡åˆ’

### 5. **å›¢é˜Ÿåä½œ**
- äº†è§£åœ¨é¡¹ç›®ä¸­çš„å…·ä½“è§’è‰²
- ä¸ªäººæ‰¿æ‹…çš„å…·ä½“å·¥ä½œå†…å®¹
- ä¸å›¢é˜Ÿæˆå‘˜çš„åä½œæ–¹å¼
- é¡¹ç›®ç®¡ç†å’Œæ—¶é—´å®‰æ’

## âš™ï¸ é…ç½®é€‰é¡¹

### é—®é¢˜æ•°é‡è°ƒæ•´
```python
# åœ¨å¼•æ“åˆå§‹åŒ–åä¿®æ”¹
engine.max_questions = 4  # é»˜è®¤ä¸º3
```

### æŠ€æœ¯å…³é”®è¯æ¨¡å¼æ‰©å±•
```python
# åœ¨experience_engine.pyä¸­æ‰©å±•tech_patterns
tech_patterns = [
    r'\b(æ–°æŠ€æœ¯å…³é”®è¯)\b',
    # æ·»åŠ æ›´å¤šæ¨¡å¼
]
```

### è¯„ä¼°æƒé‡è°ƒæ•´
```python
# åœ¨experience_evaluator.pyä¸­ä¿®æ”¹evaluation_criteria
evaluation_criteria = {
    "initial_experience_request": {
        "technical_depth": 0.4,      # è°ƒæ•´æƒé‡
        "project_complexity": 0.3,
        "personal_contribution": 0.2,
        "problem_solving": 0.1
    }
}
```

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### å•å…ƒæµ‹è¯•ç¤ºä¾‹

```python
def test_initial_question_generation():
    engine = ExperienceQuestionEngine()
    
    resume_data = {
        'projects': ['æ™ºèƒ½æ¨èç³»ç»Ÿ'],
        'experience': ['é˜¿é‡Œå·´å·´-å·¥ç¨‹å¸ˆ']
    }
    
    question = engine.start_stage(resume_data, {})
    
    assert question['question_type'] == 'initial_experience_request'
    assert 'è¯·æ‚¨é€‰æ‹©å…¶ä¸­ä¸€é¡¹' in question['question']
    assert question['question_number'] == 1

def test_deep_dive_generation():
    generator = DeepDiveQuestionGenerator()
    
    user_experience = "æˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†Flinkè¿›è¡Œå®æ—¶æµå¤„ç†..."
    question_history = [{'question_type': 'initial_experience_request'}]
    technical_keywords = ['Flink', 'æµå¤„ç†']
    
    question = generator.generate_deep_dive_question(
        user_experience, question_history, technical_keywords
    )
    
    assert question['question_type'] == 'deep_dive'
    assert len(question['question']) > 10

def test_evaluation():
    evaluator = ExperienceEvaluator()
    
    response = "æˆ‘ä»¬é€‰æ‹©Flinkæ˜¯å› ä¸ºå…¶å¼ºå¤§çš„çŠ¶æ€ç®¡ç†èƒ½åŠ›..."
    question_data = {'question_type': 'deep_dive'}
    context = {'technical_keywords': ['Flink']}
    
    result = evaluator.evaluate_response(response, question_data, context)
    
    assert 0 <= result['score'] <= 1
    assert result['technical_analysis'] is not None
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¾èµ–ç¯å¢ƒ**ï¼šéœ€è¦ollamaæœåŠ¡æ­£å¸¸è¿è¡Œï¼Œç¡®ä¿AIæ¨¡å‹å¯ç”¨
2. **ç½‘ç»œè¿æ¥**ï¼šæ·±æŒ–é—®é¢˜ç”Ÿæˆå’Œè¯„ä¼°éœ€è¦ç¨³å®šç½‘ç»œ
3. **case.docxå®Œæ•´æ€§**ï¼šç¡®ä¿æ‰€æœ‰æ·±æŒ–ç¤ºä¾‹éƒ½æ­£ç¡®é›†æˆ
4. **å®¹é”™æœºåˆ¶**ï¼šAIå¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨é—®é¢˜æ–¹æ¡ˆ

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ·±æŒ–é—®é¢˜ç”Ÿæˆå¤±è´¥**
   ```python
   # æ£€æŸ¥ollamaæœåŠ¡çŠ¶æ€
   # è‡ªåŠ¨é™çº§åˆ°å¤‡ç”¨é—®é¢˜
   fallback_question = _get_fallback_deep_dive_question()
   ```

2. **æŠ€æœ¯å…³é”®è¯æå–ä¸å‡†ç¡®**
   ```python
   # æ‰©å±•æŠ€æœ¯å…³é”®è¯æ¨¡å¼
   # æ‰‹åŠ¨è¡¥å……ç‰¹å®šé¢†åŸŸçš„æŠ€æœ¯è¯æ±‡
   ```

3. **è¯„ä¼°ç»“æœå¼‚å¸¸**
   ```python
   # ä½¿ç”¨å¤‡ç”¨è¯„ä¼°æ–¹æ³•
   # æ£€æŸ¥è¾“å…¥æ•°æ®çš„å®Œæ•´æ€§
   ```

## ğŸŠ case.docxé›†æˆè¯¦æƒ…

### å®Œæ•´æ¡ˆä¾‹è¦†ç›–
- âœ… **ç»¿è‰²é‡‘èé—®ç­”ç³»ç»Ÿ**ï¼šå¾®è°ƒã€RAGã€æ¯”èµ›è¯„åˆ¤
- âœ… **å¤å…¸æ–‡å­¦AIé¡¹ç›®**ï¼šéŸµå¾‹çŠ¶æ€æœºã€Token Masking
- âœ… **ä¼ä¸šçŸ¥è¯†åº“ç³»ç»Ÿ**ï¼šå‘é‡æ£€ç´¢ã€å¯¹æ¯”å­¦ä¹ 
- âœ… **Speculative Decoding**ï¼šè‰ç¨¿å¤´è’¸é¦ã€åŠ¨æ€é€‰æ‹©
- âœ… **DiffuTexté¡¹ç›®**ï¼šæ‰©æ•£æ¨¡å‹ã€å˜åˆ†æ¨æ–­
- âœ… **è·¨å¹³å°ç«ä»·ç³»ç»Ÿ**ï¼šè”é‚¦å­¦ä¹ ã€å·®åˆ†éšç§

### æ·±æŒ–é—®é¢˜ç¤ºä¾‹
```python
# ç»¿è‰²é‡‘èé¡¹ç›®æ·±æŒ–
"å¾®è°ƒæ—¶æ˜¯å¦æ¯”è¾ƒæ€æ ·é€‰æ‹©batch sizeå’Œä¸Šä¸‹æ–‡çª—å£é•¿åº¦æ•ˆæœæœ€å¥½ï¼Ÿ"
"ä¸ºä»€ä¹ˆé€‰æ‹©DeepSeek-r1-7bä½œä¸ºåŸºæ¨¡ï¼Ÿ"

# å¤å…¸æ–‡å­¦AIæ·±æŒ–  
"Beam Searchä¸­å¦‚ä½•å®ç°éŸµå¾‹çŠ¶æ€æœºï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€Šæµ£æºªæ²™ã€‹è¯ç‰Œçš„çº¦æŸã€‚"
"åŠ¨æ€Token Maskingå¦‚ä½•å®ç°'ç¦æ­¢é‡å¤æ„è±¡'ï¼Ÿ"

# ä¼ä¸šçŸ¥è¯†åº“æ·±æŒ–
"å¾®è°ƒæ—¶ä¸ºä»€ä¹ˆé€‰æ‹©å¯¹æ¯”å­¦ä¹ æ¡†æ¶è€Œéäº¤å‰ç†µï¼Ÿ"
"Faissç´¢å¼•é€‰æ‹©IVF-PQè€ŒéHNSWçš„å…³é”®è€ƒé‡æ˜¯ä»€ä¹ˆï¼Ÿ"
```

## ğŸ¯ æ€»ç»“

ç¬¬äºŒé˜¶æ®µç»å†ç±»é—®é¢˜æ¨¡å—å®Œå…¨æŒ‰ç…§æ‚¨çš„è¦æ±‚å®ç°ï¼š

- âœ… **å›ºå®šé¦–é—®**ï¼šç¬¬ä¸€ä¸ªé—®é¢˜é™å®šä¸ºç»å†ä»‹ç»è¯·æ±‚
- âœ… **case.docxé›†æˆ**ï¼šå®Œæ•´çš„æ·±æŒ–æé—®æ–¹å¼å’Œç³»ç»Ÿæç¤ºè¯
- âœ… **ä¸“ä¸šæ·±æŒ–**ï¼šåŸºäºçœŸå®æŠ€æœ¯é¢è¯•çš„æ·±åº¦è¿½é—®
- âœ… **æ™ºèƒ½åˆ†æ**ï¼šæŠ€æœ¯å…³é”®è¯æå–å’Œé’ˆå¯¹æ€§è¯„ä¼°
- âœ… **å®Œæ•´æµç¨‹**ï¼šä»ç»å†ä»‹ç»åˆ°æ·±æŒ–è¿½é—®çš„å…¨ç¨‹ç®¡ç†

è¿™ä¸€æ¨¡å—è®©AIé¢è¯•ç³»ç»Ÿèƒ½å¤Ÿåƒèµ„æ·±æŠ€æœ¯é¢è¯•å®˜ä¸€æ ·ï¼Œæ·±å…¥æŒ–æ˜å€™é€‰äººçš„é¡¹ç›®ç»å†å’ŒæŠ€æœ¯èƒ½åŠ›ï¼ŒçœŸæ­£è¯„ä¼°å…¶å®é™…æ°´å¹³å’Œç»éªŒæ·±åº¦ï¼ğŸ¯
